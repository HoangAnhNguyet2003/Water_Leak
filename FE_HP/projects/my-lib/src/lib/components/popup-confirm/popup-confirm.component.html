<div class="popup-overlay" *ngIf="isVisible" (click)="onCancel()">
      <div class="popup-container" (click)="$event.stopPropagation()">
        <div class="popup-content">
          <!-- Success Icon for success mode -->
          <div class="success-icon" *ngIf="mode === PopupMode.SUCCESS">
            <span class="success-check">✓</span>
          </div>
          <!-- Error Icon for error mode -->
          <div class="error-icon" *ngIf="mode === PopupMode.ERROR">
            <span class="error-cross">✗</span>
          </div>

          <h3 *ngIf="title">{{ title }}</h3>
          <p *ngIf="message">{{ message }}</p>

          <!-- Password input for password mode -->
          <div class="password-section" *ngIf="mode === PopupMode.PASSWORD">
            <label for="password">Nhập mật khẩu để xác nhận:</label>
            <input
              type="password"
              id="password"
              class="password-input"
              [(ngModel)]="passwordValue"
              placeholder="Mật khẩu"
              (keyup.enter)="onConfirm()"
              #passwordInput>
            <div class="error-message" *ngIf="showPasswordError">
              Mật khẩu không đúng!
            </div>
          </div>

          <!-- Buttons -->
          <div class="popup-buttons">
            <!-- Success and Error modes: only OK button -->
            <button
              type="button"
              class="btn btn-success"
              *ngIf="mode === PopupMode.SUCCESS || mode === PopupMode.ERROR"
              (click)="onConfirm()">
              OK
            </button>

            <!-- Confirm and Password modes: Cancel + Confirm buttons -->
            <ng-container *ngIf="mode !== PopupMode.SUCCESS && mode !== PopupMode.ERROR">
              <button type="button" class="btn btn-cancel" (click)="onCancel()">
                {{ cancelText || 'Hủy' }}
              </button>
              <button type="button" class="btn btn-confirm" (click)="onConfirm()">
                {{ confirmText || 'Xác nhận' }}
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
